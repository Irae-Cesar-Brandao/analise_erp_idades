<!DOCTYPE html> 
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>ERP - An√°lise Interativa</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f7f9;
      margin: 40px;
      color: #333;
    }

    h1, h2 {
      text-align: center;
      color: #2c3e50;
    }

    .content-box {
      background-color: #fff;
      padding: 20px;
      margin: 30px auto;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
     /* max-width: 800px;*/
width: 100%;	
      text-align: justify;
    }

    canvas {
      display: block;
      margin: 0 auto;
      max-width: 800px;
    }

    .footer {
      text-align: center;
      margin-top: 40px;
      font-size: 0.9em;
      color: #777;
    }

    form {
      max-width: 800px;
      margin: 30px auto;
      padding: 20px;
      background-color: #eaf0f6;
      border-radius: 10px;
    }

    label {
      display: block;
      margin-bottom: 8px;
      font-weight: bold;
    }

    input, select {
      width: 100%;
      padding: 8px;
      margin-bottom: 15px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }

    button {
      padding: 10px 20px;
      border: none;
      background-color: #2c3e50;
      color: white;
      font-weight: bold;
      cursor: pointer;
      border-radius: 6px;
    }

    button:hover {
      background-color: #1a242f;
    }

    #diagnostico {
      max-width: 800px;
      margin: 20px auto;
      padding: 20px;
      background-color: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
      border-radius: 10px;
      font-size: 1.1em;
    }
  </style>
</head>
<body>

  <h1>An√°lise dos Potenciais Relacionados a Eventos (ERP)</h1>
  <h2>Comparativo de Faixas Et√°rias e Inser√ß√£o de Dados Individuais</h2>
  <h3>Desenvolvedor: Ira√™ C√©sar Brand√£o - <h6><i>Desenvolvido em: 25/12/2026 Atualizado em: 19/02/2025</i></h6></h3>

  <div class="content-box">
    <strong>Notas Explicativas:</strong> Este gr√°fico representa varia√ß√µes dos Potenciais Relacionados a Eventos (ERP), 
    com foco em duas m√©tricas principais: <strong>Lat√™ncia (ms)</strong> e <strong>Amplitude (ŒºV)</strong>. 
    Insira os dados de uma pessoa analisada abaixo para posicion√°-la no gr√°fico.<br>
<hr>
    <strong>O que significa Event-Related Potentials (ERP) ?</strong> <br>
    (tradu√ß√£o em portugues: - Potenciais Relacionados a Eventos -  s√£o flutua√ß√µes de voltagem, 
    medidas no couro cabeludo, que est√£o sincronizadas com um evento espec√≠fico. Esses eventos 
    podem ser est√≠mulos sensoriais, atividades cognitivas ou at√© mesmo respostas motoras. Os ERPs s√£o,
    na realidade, uma medida da atividade cerebral, captada atrav√©s da eletroencefalografia (EEG), que 
    √© analisada para identificar padr√µes de resposta a determinados est√≠mulos (WOODMAN, 2010). 
  </div>

  <form id="dataForm">
    <label for="nome">Nome da Pessoa:</label>
    <input type="text" id="nome" required>

    <label for="faixa">Faixa Et√°ria:</label>
    <select id="faixa" required>
      <option value="">Selecione</option>
      <option value="15-20">15‚Äì20</option>
      <option value="21-30">21‚Äì30</option>
      <option value="31-40">31‚Äì40</option>
      <option value="41-50">41‚Äì50</option>
      <option value="51-60">51‚Äì60</option>
      <option value="61-70">61‚Äì70</option>
      <option value="71+">71+</option>
    </select>

    <label for="latencia">Lat√™ncia (ms): Entre 200 a 500</label>
    <input type="number" id="latencia" min="200" max="500" required>

    <label for="amplitude">Amplitude (ŒºV): Entre 0 a 20</label>
    <input type="number" id="amplitude" min="0" max="20" step="0.1" required>
    
<!-- BOT√ïES DO BROWSER INSERIR, ESPORTAR E RESETAR -->
    <button type="submit">Inserir no Gr√°fico</button>
    <button type="button" id="exportarBtn">Exportar Resultado</button>
    <button type="button" id="resetarBtn">Novo C√°lculo</button>
  </form>

  <canvas id="erpChart" width="800" height="400"></canvas>



<div id="diagnostico"></div>

<div class="content-box">
<img  src="ERP_img.jpg"   alt="ERPO "   width="500"   height="441"   text-align: "justify  title"/>
  <br>Fonte: Woodman( 2010). <br> <b>Fig 1: S√©rie de Flutua√ß√µes de Voltagem</b></img>
</div>

<!-- //////////////////////////////////////-->
<!-- Container principal sobre ERP -->
<div style="background-color:#f0f7ff; padding:20px; border-radius:10px; font-family:Arial, sans-serif; line-height:1.6;">

    <!-- T√≠tulo da se√ß√£o -->
    <h2>Potenciais Relacionados a Eventos (ERP)</h2>

    <!-- Introdu√ß√£o explicativa -->
    <p>
        Essa t√©cnica √© uma forma especializada de analisar o Eletroencefalograma (EEG).
        Enquanto o EEG mostra a atividade cerebral cont√≠nua, o ERP isola a resposta do
        c√©rebro a um est√≠mulo sensorial (ex: um som), cognitivo (ex: leitura de uma palavra)
        ou motor (ex: apertar um bot√£o).
    </p>

    <!-- Tabela principal de organiza√ß√£o das informa√ß√µes -->
    <table border="1" cellpadding="10" cellspacing="0" width="100%">
        
        <!-- Cabe√ßalho da tabela -->
        <thead>
            <tr>
                <th>Categoria</th>
                <th>Descri√ß√£o</th>
            </tr>
        </thead>

        <!-- Corpo da tabela -->
        <tbody>

            <!-- Se√ß√£o: Principais Caracter√≠sticas -->
            <tr>
                <td><strong>Sincroniza√ß√£o com o Evento</strong></td>
                <td>O ERP mede o que acontece no c√©rebro milissegundos ap√≥s um est√≠mulo.</td>
            </tr>

            <tr>
                <td><strong>M√©dia de Sinais</strong></td>
                <td>
                    Como a resposta a um √∫nico est√≠mulo √© pequena e misturada com o ru√≠do cerebral,
                    o est√≠mulo √© repetido diversas vezes e os sinais s√£o promediados para gerar
                    uma onda ERP clara.
                </td>
            </tr>

            <tr>
                <td><strong>Componentes (Picos)</strong></td>
                <td>
                    O ERP √© visualizado como um gr√°fico com picos positivos (P) e negativos (N).
                    O n√∫mero (ex: P300) indica o tempo aproximado, em milissegundos, em que ocorre.
                </td>
            </tr>

            <tr>
                <td><strong>Alta Resolu√ß√£o Temporal</strong></td>
                <td>
                    Permite identificar quando o c√©rebro processa informa√ß√µes com precis√£o de milissegundos.
                </td>
            </tr>

            <!-- Se√ß√£o: Componentes ERP Famosos -->
            <tr>
                <td><strong>N170</strong></td>
                <td>Relacionado ao processamento visual de faces.</td>
            </tr>

            <tr>
                <td><strong>P300</strong></td>
                <td>Associado √† aten√ß√£o, mem√≥ria e detec√ß√£o de est√≠mulos relevantes ou inesperados.</td>
            </tr>

            <tr>
                <td><strong>N400</strong></td>
                <td>
                    Associado ao processamento de linguagem e significado sem√¢ntico,
                    especialmente quando h√° incongru√™ncia contextual.
                </td>
            </tr>

            <!-- Se√ß√£o: Aplica√ß√µes -->
            <tr>
                <td><strong>Neuroci√™ncia Cognitiva</strong></td>
                <td>
                    Estudo de percep√ß√£o, aten√ß√£o, mem√≥ria e linguagem.
                </td>
            </tr>

            <tr>
                <td><strong>Diagn√≥stico Cl√≠nico</strong></td>
                <td>
                    Investiga√ß√£o de dist√∫rbios neurol√≥gicos e psiqui√°tricos,
                    identificando anomalias no funcionamento cerebral.
                </td>
            </tr>

            <tr>
                <td><strong>Interfaces C√©rebro-M√°quina (BCI)</strong></td>
                <td>
                    Permitem controlar dispositivos atrav√©s de inten√ß√µes motoras ou cognitivas.
                </td>
            </tr>

        </tbody>
    </table>

</div>
  <!--/////////////////////////////////////////////////-->


<!-- Container principal sobre obten√ß√£o e c√°lculo de ERP -->
<div style="background-color:#f0f7ff; padding:20px; border-radius:10px; font-family:Arial, sans-serif; line-height:1.6;">

    <!-- T√≠tulo principal -->
    <h2 style="color:#0b3d91;">Formas de Obten√ß√£o e C√°lculo dos Valores de ERP</h2>

    <!-- ============================= -->
    <!-- 1. M√©todos de Aquisi√ß√£o       -->
    <!-- ============================= -->
    <h3 style="color:#1a5fb4;">1. M√©todos de Aquisi√ß√£o e Processamento (T√©cnico)</h3>
    <ul>
        <!-- EEG como base de registro -->
        <li>
            <strong>Eletroencefalografia (EEG):</strong>
            Registro da atividade cerebral atrav√©s de eletrodos posicionados no couro cabeludo,
            medindo varia√ß√µes el√©tricas em milissegundos.
        </li>

        <!-- T√©cnica de m√©dia de ensaios -->
        <li>
            <strong>M√©dia de Ensaios (Averaging):</strong>
            O mesmo est√≠mulo √© apresentado dezenas ou centenas de vezes (m√≠nimo t√≠pico de 20‚Äì30).
            As respostas sincronizadas s√£o calculadas em m√©dia para gerar ondas ERP mais claras.
        </li>

        <!-- Sincroniza√ß√£o temporal -->
        <li>
            <strong>Sincroniza√ß√£o de Tempo (Time-locking):</strong>
            O sinal de EEG √© marcado exatamente no momento do est√≠mulo ou resposta,
            garantindo precis√£o temporal.
        </li>

        <!-- Limpeza de artefatos -->
        <li>
            <strong>Limpeza de Sinais e Artefatos:</strong>
            Remo√ß√£o de ru√≠dos como piscadas e movimentos musculares antes da m√©dia final.
        </li>
    </ul>

    <!-- ============================= -->
    <!-- 2. An√°lise dos Valores        -->
    <!-- ============================= -->
    <h3 style="color:#1a5fb4;">2. An√°lise dos Valores (M√©tricas)</h3>
    <ul>
        <!-- Amplitude -->
        <li>
            <strong>Amplitude (Voltagem):</strong>
            Mede a intensidade do componente em microvolts (¬µV),
            indicada pela altura da onda em rela√ß√£o √† linha de base.
        </li>

        <!-- Lat√™ncia -->
        <li>
            <strong>Lat√™ncia (Tempo):</strong>
            Mede o tempo entre o est√≠mulo e o pico da onda,
            geralmente em milissegundos (ms).
        </li>

        <!-- Mapas de escalpo -->
        <li>
            <strong>Mapas de Escala (Scalp Maps):</strong>
            Representam visualmente como a amplitude do ERP se distribui pela superf√≠cie da cabe√ßa.
        </li>
    </ul>

    <!-- ============================= -->
    <!-- 3. Formas de Onda             -->
    <!-- ============================= -->
    <h3 style="color:#1a5fb4;">3. Principais Formas de Onda</h3>
    <ul>
        <li><strong>P50:</strong> Componente precoce do processamento sensorial.</li>
        <li><strong>N100 (N1):</strong> Primeira resposta negativa ap√≥s o est√≠mulo.</li>
        <li>
            <strong>P300 (P3):</strong>
            Relacionado √† aten√ß√£o e mem√≥ria, com pico geralmente entre 300‚Äì500 ms.
        </li>
    </ul>

    <!-- ============================= -->
    <!-- 4. Software e Hardware        -->
    <!-- ============================= -->
    <h3 style="color:#1a5fb4;">4. Software e Hardware Utilizados</h3>
    <ul>
        <li>
            <strong>Softwares:</strong>
            EmotivPRO Analyzer, Neuroscan, BrainVision, EEGLAB (MATLAB),
            PsychoPy (para apresenta√ß√£o de est√≠mulos).
        </li>
        <li>
            <strong>Hardware:</strong>
            Capacetes de EEG (ex: Emotiv EPOC) e amplificadores de sinal.
        </li>
    </ul>

</div>

<!-- =============================== -->
<!-- DIV DE EXPLICA√á√ÉO ARITM√âTICA ERP -->
<!-- =============================== -->
<div style="
  border: 2px solid #4a90e2; 
  border-radius: 12px; 
  padding: 20px; 
  margin: 20px 0; 
  background-color: #f0f8ff;
  font-family: Arial, sans-serif;
  color: #333;
  line-height: 1.6;
">
  <h3 style="color:#1a5276;">C√°lculo e Interpreta√ß√£o do ERP (Lat√™ncia e Amplitude)</h3>
  
  <p>
    Este gr√°fico representa os <strong>Potenciais Relacionados a Eventos (ERP)</strong>, com foco em duas m√©tricas principais:
    <strong>Lat√™ncia (ms)</strong> e <strong>Amplitude (ŒºV)</strong>. 
    Para posicionar um participante no gr√°fico, utiliza-se o <em>Z-score</em> em rela√ß√£o a um banco normativo da mesma faixa et√°ria.
  </p>
  
  <h4 style="color:#1a5276;">1. F√≥rmula do Z-score</h4>
  <p>
    <strong>Lat√™ncia:</strong><br>
    <code>Z<sub>Lat</sub> = (L<sub>p</sub> - LÃÑ) / SD<sub>L</sub></code><br>
    <strong>Amplitude:</strong><br>
    <code>Z<sub>Amp</sub> = (A<sub>p</sub> - AÃÑ) / SD<sub>A</sub></code>
  </p>
  
  <h4 style="color:#1a5276;">2. Passo a passo aritm√©tico</h4>
  <ol>
    <li>Obter a m√©dia (LÃÑ / AÃÑ) e o desvio padr√£o (SD<sub>L</sub> / SD<sub>A</sub>) da faixa et√°ria do banco normativo.</li>
    <li>Subtrair a m√©dia do valor medido pelo participante.</li>
    <li>Dividir a diferen√ßa pelo desvio padr√£o correspondente.</li>
    <li>Interpretar o Z-score:
      <ul>
        <li>|Z| ‚â§ 1 ‚Üí Dentro do esperado</li>
        <li>1 < |Z| ‚â§ 2 ‚Üí Varia√ß√£o moderada</li>
        <li>|Z| > 2 ‚Üí Altera√ß√£o significativa</li>
      </ul>
    </li>
    <li>Plotar os valores no gr√°fico de Lat√™ncia e Amplitude do participante.</li>
  </ol>

  <h4 style="color:#1a5276;">3. Exemplo num√©rico</h4>
  <p>
    Lat√™ncia medida: 290 ms<br>
    M√©dia normativa: 270 ms<br>
    Desvio padr√£o: 15 ms<br>
    <strong>Z<sub>Lat</sub> = (290 - 270) / 15 = 1,33</strong> ‚Üí Varia√ß√£o moderada
  </p>
  <p>
    Amplitude medida: 11 ŒºV<br>
    M√©dia normativa: 13 ŒºV<br>
    Desvio padr√£o: 2 ŒºV<br>
    <strong>Z<sub>Amp</sub> = (11 - 13) / 2 = -1</strong> ‚Üí Dentro do esperado
  </p>

  <h4 style="color:#1a5276;">Refer√™ncia cient√≠fica</h4>
  <p>
    Luck, S. J. (2014). <em>Introduction to the Event-Related Potential Technique</em> (2nd ed.). MIT Press.<br>
    - Explica conceitos de lat√™ncia, amplitude e uso de Z-scores para interpreta√ß√£o de ERP.
  </p>
</div>
  <!--///////////////////////////////////////////-->

<!-- Container principal: P√∫blico interessado no sistema ERP -->
<div style="background-color:#f0f7ff; padding:20px; border-radius:10px; font-family:Arial, sans-serif; line-height:1.6; margin-top:20px;">

    <!-- T√≠tulo da se√ß√£o -->
    <h2 style="color:#0b3d91;">Quais especialidades profissionais fazem uso da an√°lise de ERP?</h2>

    <!-- Tabela explicativa -->
    <table style="width:100%; border-collapse:collapse; background-color:#ffffff;">

        <!-- Cabe√ßalho da tabela -->
        <thead>
            <tr style="background-color:#dbe9ff;">
                <th style="border:1px solid #ccc; padding:10px; text-align:left;">Profissional / √Årea</th>
                <th style="border:1px solid #ccc; padding:10px; text-align:left;">Objetivo / Aplica√ß√£o</th>
            </tr>
        </thead>

        <!-- Corpo da tabela -->
        <tbody>

            <!-- Linha 1 -->
            <tr>
                <td style="border:1px solid #ccc; padding:10px;">
                    <strong>Neurocientistas Cognitivos e Pesquisadores</strong>
                </td>
                <td style="border:1px solid #ccc; padding:10px;">
                    Mapear o cronograma preciso de processos mentais como aten√ß√£o, mem√≥ria,
                    processamento de linguagem (ex: N400) e reconhecimento de faces (ex: N170).
                </td>
            </tr>

            <!-- Linha 2 -->
            <tr style="background-color:#f9fbff;">
                <td style="border:1px solid #ccc; padding:10px;">
                    <strong>Psic√≥logos e Psiquiatras</strong>
                </td>
                <td style="border:1px solid #ccc; padding:10px;">
                    Identificar biomarcadores de transtornos mentais como TDAH
                    (altera√ß√µes na lat√™ncia do P300), ansiedade (ERN) e depress√£o.
                </td>
            </tr>

            <!-- Linha 3 -->
            <tr>
                <td style="border:1px solid #ccc; padding:10px;">
                    <strong>Neurologistas e Cl√≠nicos</strong>
                </td>
                <td style="border:1px solid #ccc; padding:10px;">
                    Investigar dist√∫rbios neurol√≥gicos, epilepsia e avaliar funcionalmente
                    pacientes com dificuldade de resposta verbal atrav√©s do monitoramento por EEG.
                </td>
            </tr>

            <!-- Linha 4 -->
            <tr style="background-color:#f9fbff;">
                <td style="border:1px solid #ccc; padding:10px;">
                    <strong>Pesquisadores de Tomada de Decis√£o</strong>
                </td>
                <td style="border:1px solid #ccc; padding:10px;">
                    Estudar o processamento cerebral relacionado a risco,
                    avalia√ß√£o de feedback e escolha comportamental.
                </td>
            </tr>

        </tbody>

    </table>

</div>
<!--////////////////////////////////////////////////////-->
  
<div class="content-box">
    <strong>Refer√™ncias Bibliogr√°ficas:</strong>
    <ul style="padding-left: 20px; text-align: justify; line-height: 1.6;">
      <li>
        HANDY, Todd C. (2005). <em><b>Event-Related Potentials </b>: A Methods Handbook</em>.<i> Cambridge: MIT Press</i>. 
<!--Dispon√≠vel em: https://pmc.ncbi.nlm.nih.gov/articles/PMC3816929/. Acesso em: 06 mai. 2025.--> 
      </li>
      
      <li>
        KUTAS, Marta; FEDERMEIER, Kara D. (2011). 
        <em><b>Thirty years and counting: Finding meaning in the N400 component of the event-related brain potential (ERP)</b></em>. 
        <i>Annual Review of Psychology</i>, 62, 621‚Äì647. 
        DOI: https://doi.org/10.1146/annurev.psych.093008.131123
      </li>
      
      <li>
        LUCK, Steven J.  (2014).<em><b>An Introduction to the Event-Related Potential Technique </b></em>. 2. ed. Cambridge: MIT Press.
      </li>

      <li>
        POLICH, John (2007). <em><b>Updating P300: An integrative theory of P3a and P3b</b></em>. 
        <i>Clinical Neurophysiology</i>, 118(10), 2128‚Äì2148. 
        DOI: https://doi.org/10.1016/j.clinph.2007.04.019
      </li>
      
      <li>
        WOODMAN, Geoffrey F. (2010). <em><i> <b>A brief introduction to the use of event-related 
          potentials in studies of perception and attention </b></i></em>. [online]  
        <i>Attention, perception & psychophysics. USA: National Library of Medicine </i>, 72 (8). pp. 2031‚Äì2046. 
        DOI: 10.3758/APP.72.8.2031. PMID: 21097848; PMCID: PMC3816929. 
<!-- Disponivel em: https://pmc.ncbi.nlm.nih.gov/articles/PMC3816929/. Acesso em: 06 mai.2025. -->
      </li>

    </ul>
  </div>


  <div class="footer">
    Autor: Nome do Autor: IRA√ä C√âSAR BRAND√ÉO - Luck Way Inform√°tica<br>
    Data de Elabora√ß√£o: 06 de Maio de 2025<br>
    Simula√ß√£o com dados baseados em literatura neurocient√≠fica sobre ERP
  </div>




<script>
// ===============================
// CONFIGURA√á√ÉO DO GR√ÅFICO
// ===============================
const ctx = document.getElementById('erpChart').getContext('2d');

const faixas = ["15-20", "21-30", "31-40", "41-50", "51-60", "61-70", "71+"];

// Banco normativo (m√©dia e desvio padr√£o)
const bancoNormativo = {
  latenciaMedia: [280, 250, 270, 290, 310, 340, 370],
  latenciaSD:    [15, 15, 18, 20, 22, 25, 30],
  amplitudeMedia: [12, 14, 13, 11, 10, 8, 6],
  amplitudeSD:    [2, 2, 2, 2, 2, 1.5, 1.5]
};

// Configura√ß√£o inicial do Chart.js
const config = {
  type: 'line',
  data: {
    labels: faixas,
    datasets: [
      {
        label: 'Lat√™ncia M√©dia (ms)',
        data: [...bancoNormativo.latenciaMedia],
        borderColor: 'red',
        tension: 0.3,
        yAxisID: 'y1'
      },
      {
        label: 'Amplitude M√©dia (ŒºV)',
        data: [...bancoNormativo.amplitudeMedia],
        borderColor: 'blue',
        tension: 0.3,
        yAxisID: 'y2'
      },
      {
        label: 'Participante - Lat√™ncia',
        data: Array(faixas.length).fill(null),
        borderColor: 'darkred',
        borderDash: [5,5],
        tension: 0.3,
        yAxisID: 'y1',
        showLine: true,
        pointRadius: 7,
        pointBackgroundColor: 'darkred'
      },
      {
        label: 'Participante - Amplitude',
        data: Array(faixas.length).fill(null),
        borderColor: 'darkblue',
        borderDash: [5,5],
        tension: 0.3,
        yAxisID: 'y2',
        showLine: true,
        pointRadius: 7,
        pointBackgroundColor: 'darkblue'
      }
    ]
  },
  options: {
    responsive: true,
    interaction: { mode: 'index', intersect: false },
    plugins: { tooltip: { mode: 'nearest' } },
    scales: {
      y1: {
        type: 'linear',
        position: 'left',
        min: 200,
        max: 400,
        title: { display: true, text: 'Lat√™ncia (ms)' }
      },
      y2: {
        type: 'linear',
        position: 'right',
        min: 0,
        max: 20,
        grid: { drawOnChartArea: false },
        title: { display: true, text: 'Amplitude (ŒºV)' }
      }
    }
  }
};

const erpChart = new Chart(ctx, config);

// ===============================
// EVENT LISTENER DO FORMUL√ÅRIO
// ===============================
document.getElementById('dataForm').addEventListener('submit', function (e) {
  e.preventDefault();

  const nome = document.getElementById('nome').value;
  const faixa = document.getElementById('faixa').value;
  const latencia = parseFloat(document.getElementById('latencia').value);
  const amplitude = parseFloat(document.getElementById('amplitude').value);

  const index = faixas.indexOf(faixa);
  if (index === -1) { alert("Faixa et√°ria inv√°lida!"); return; }

  // ===============================
  // Atualiza dados do participante
  // ===============================
  erpChart.data.datasets[2].data[index] = latencia;
  erpChart.data.datasets[3].data[index] = amplitude;
  erpChart.update();

  // ===============================
  // Diagn√≥stico autom√°tico detalhado
  // ===============================
  const mediaLat = bancoNormativo.latenciaMedia[index];
  const sdLat = bancoNormativo.latenciaSD[index];
  const mediaAmp = bancoNormativo.amplitudeMedia[index];
  const sdAmp = bancoNormativo.amplitudeSD[index];

  const zLat = (latencia - mediaLat) / sdLat;
  const zAmp = (amplitude - mediaAmp) / sdAmp;

  let diagnostico = "";
  let cor = "";

  // 1Ô∏è‚É£ Valores pr√≥ximos √† m√©dia (¬±1 desvio padr√£o)
  if (Math.abs(zLat) <= 1 && Math.abs(zAmp) <= 1) {
    cor = "green";
    diagnostico = `
Resultado para ${nome}:

Faixa et√°ria: ${faixa}

Lat√™ncia informada: ${latencia} ms
Intervalo esperado: ${(mediaLat - sdLat).toFixed(1)} ‚Äì ${(mediaLat + sdLat).toFixed(1)} ms

Amplitude informada: ${amplitude} ŒºV
Intervalo esperado: ${(mediaAmp - sdAmp).toFixed(1)} ‚Äì ${(mediaAmp + sdAmp).toFixed(1)} ŒºV

Z-score Lat√™ncia: ${zLat.toFixed(2)}
Z-score Amplitude: ${zAmp.toFixed(2)}

Classifica√ß√£o: Valores dentro do intervalo esperado (¬±1 desvio padr√£o).

Interpreta√ß√£o: 
- Processamento cognitivo consistente com normas.
- Pequenas varia√ß√µes s√£o normais e n√£o indicam comprometimento.

Recomenda√ß√µes:
- Acompanhamento de rotina.
- Nenhuma interven√ß√£o espec√≠fica necess√°ria neste momento.
`;
  } 
  // 2Ô∏è‚É£ Varia√ß√£o moderada (1‚Äì2 desvios padr√£o)
  else if (Math.abs(zLat) <= 2 && Math.abs(zAmp) <= 2) {
    cor = "orange";
    diagnostico = `
Resultado para ${nome}:

Faixa et√°ria: ${faixa}

Lat√™ncia informada: ${latencia} ms
Intervalo esperado: ${(mediaLat - sdLat).toFixed(1)} ‚Äì ${(mediaLat + sdLat).toFixed(1)} ms

Amplitude informada: ${amplitude} ŒºV
Intervalo esperado: ${(mediaAmp - sdAmp).toFixed(1)} ‚Äì ${(mediaAmp + sdAmp).toFixed(1)} ŒºV

Z-score Lat√™ncia: ${zLat.toFixed(2)}
Z-score Amplitude: ${zAmp.toFixed(2)}

Classifica√ß√£o: Varia√ß√£o moderada (entre 1 e 2 desvios padr√£o).

Interpreta√ß√£o:
- Pode refletir varia√ß√µes individuais, aten√ß√£o, fadiga ou pequenas altera√ß√µes funcionais.
- N√£o necessariamente indica patologia, mas merece aten√ß√£o.

Recomenda√ß√µes:
- Monitoramento regular e reavalia√ß√£o em 3‚Äì6 meses.
- Avalia√ß√£o complementar se houver sintomas cl√≠nicos associados.
- Registrar fatores contextuais que possam influenciar resultados.
`;
  } 
  // 3Ô∏è‚É£ Altera√ß√£o significativa (>2 desvios padr√£o)
  else {
    cor = "red";
    diagnostico = `
Resultado para ${nome}:

Faixa et√°ria: ${faixa}

Lat√™ncia informada: ${latencia} ms
Intervalo esperado: ${(mediaLat - sdLat).toFixed(1)} ‚Äì ${(mediaLat + sdLat).toFixed(1)} ms

Amplitude informada: ${amplitude} ŒºV
Intervalo esperado: ${(mediaAmp - sdAmp).toFixed(1)} ‚Äì ${(mediaAmp + sdAmp).toFixed(1)} ŒºV

Z-score Lat√™ncia: ${zLat.toFixed(2)}
Z-score Amplitude: ${zAmp.toFixed(2)}

Classifica√ß√£o: Altera√ß√£o significativa (>2 desvios padr√£o).

Interpreta√ß√£o:
- Sugere poss√≠vel altera√ß√£o no processamento cognitivo.
- Necess√°rio avalia√ß√£o especializada; n√£o √© diagn√≥stico isolado.

Recomenda√ß√µes:
- Encaminhamento para avalia√ß√£o neurol√≥gica ou neuropsicol√≥gica.
- Considerar exames complementares ou reavalia√ß√£o.
- Registrar detalhadamente hist√≥rico cl√≠nico e fatores contextuais.
`;
  }

  // ‚ö† Nota educativa
  diagnostico += `

‚ö†Ô∏è  **AVISO:** Este sistema √© **experimental, acad√™mico e destinado a fins did√°ticos e educativos**. 
N√£o substitui avalia√ß√£o cl√≠nica especializada (e.g., psicol√≥gica ou m√©dica profissional).  
`;

  const diagnosticoElemento = document.getElementById('diagnostico');
  diagnosticoElemento.innerText = diagnostico;
  diagnosticoElemento.style.color = cor;

  this.reset();
});

// ===============================
// BOT√ÉO EXPORTAR
// ===============================
document.getElementById("exportarBtn").addEventListener("click", function () {
  const texto = document.getElementById("diagnostico").innerText;
  if (!texto.trim()) { alert("Nenhum resultado para exportar."); return; }

  const blob = new Blob([texto], { type: "text/plain" });
  const link = document.createElement("a");
  link.href = URL.createObjectURL(blob);
  link.download = "Relatorio_ERP.txt";
  link.click();
});

// ===============================
// BOT√ÉO RESETAR
// ===============================
document.getElementById("resetarBtn").addEventListener("click", function () {
  erpChart.data.datasets[2].data = Array(faixas.length).fill(null);
  erpChart.data.datasets[3].data = Array(faixas.length).fill(null);
  erpChart.update();

  const diagnosticoElemento = document.getElementById("diagnostico");
  diagnosticoElemento.innerText = "";
  diagnosticoElemento.style.color = "black";

  document.getElementById("dataForm").reset();
});


    
   /* 
    const ctx = document.getElementById('erpChart').getContext('2d');

const faixas = ["15-20", "21-30", "31-40", "41-50", "51-60", "61-70", "71+"];

// ===============================
// M√©dias normativas FIXAS (n√£o alteradas)
// ===============================

const mediasNormativas = {
  latencia: [280, 250, 270, 290, 310, 340, 370],
  amplitude: [12, 14, 13, 11, 10, 8, 6]
};

const chartData = {
  labels: faixas,
  datasets: [
    {
      label: 'Lat√™ncia (ms)',
      data: [280, 250, 270, 290, 310, 340, 370],
      borderColor: 'red',
      backgroundColor: 'rgba(255, 99, 132, 0.2)',
      yAxisID: 'y1',
      tension: 0.3,
      pointRadius: 5,
      pointHoverRadius: 8
    },
    {
      label: 'Amplitude (ŒºV)',
      data: [12, 14, 13, 11, 10, 8, 6],
      borderColor: 'blue',
      backgroundColor: 'rgba(54, 162, 235, 0.2)',
      yAxisID: 'y2',
      tension: 0.3,
      pointRadius: 5,
      pointHoverRadius: 8
    }
  ]
};

const config = {
  type: 'line',
  data: chartData,
  options: {
    responsive: true,
    interaction: {
      mode: 'index',
      intersect: false,
    },
    plugins: {
      tooltip: { mode: 'nearest' }
    },
    scales: {
      y1: {
        type: 'linear',
        position: 'left',
        title: { display: true, text: 'Lat√™ncia (ms)' },
        min: 200,
        max: 400
      },
      y2: {
        type: 'linear',
        position: 'right',
        title: { display: true, text: 'Amplitude (ŒºV)' },
        min: 0,
        max: 20,
        grid: { drawOnChartArea: false }
      }
    }
  }
};

const erpChart = new Chart(ctx, config);

document.getElementById('dataForm').addEventListener('submit', function (e) {
  e.preventDefault();

  const nome = document.getElementById('nome').value;
  const faixa = document.getElementById('faixa').value;
  const latencia = parseFloat(document.getElementById('latencia').value);
  const amplitude = parseFloat(document.getElementById('amplitude').value);

  const index = faixas.indexOf(faixa);

  if (index === -1) {
    alert("Faixa et√°ria inv√°lida!");
    return;
  }

  // üî• AQUI EST√Å A CORRE√á√ÉO PRINCIPAL:
  // Atualiza os valores das linhas existentes

  erpChart.data.datasets[0].data[index] = latencia;   // Lat√™ncia
  erpChart.data.datasets[1].data[index] = amplitude;  // Amplitude

// ===============================
// Diagn√≥stico comparativo avan√ßado
// ===============================

// ===============================
// Diagn√≥stico comparativo correto
// ===============================

let diagnostico = '';

// üî• Pega a m√©dia do banco FIXO (n√£o do gr√°fico!)
const mediaLatencia = mediasNormativas.latencia[index];
const mediaAmplitude = mediasNormativas.amplitude[index];

// Calcula varia√ß√£o percentual
const varLat = ((latencia - mediaLatencia) / mediaLatencia) * 100;
const varAmp = ((amplitude - mediaAmplitude) / mediaAmplitude) * 100;

// Classifica√ß√£o
if (Math.abs(varLat) <= 10 && Math.abs(varAmp) <= 10) {

  diagnostico = `
Os valores encontram-se pr√≥ximos √† m√©dia esperada para a faixa et√°ria (${faixa}).
Varia√ß√£o de Lat√™ncia: ${varLat.toFixed(1)}%.
Varia√ß√£o de Amplitude: ${varAmp.toFixed(1)}%.

N√£o h√° ind√≠cios imediatos de altera√ß√£o funcional significativa no componente ERP avaliado.
`;

} else if (Math.abs(varLat) <= 20 && Math.abs(varAmp) <= 20) {

  diagnostico = `
Observa-se varia√ß√£o moderada em rela√ß√£o √† m√©dia normativa da faixa (${faixa}).
Varia√ß√£o de Lat√™ncia: ${varLat.toFixed(1)}%.
Varia√ß√£o de Amplitude: ${varAmp.toFixed(1)}%.

Recomenda-se monitoramento e avalia√ß√£o complementar se houver sintomas cl√≠nicos associados.
`;

} else {

  diagnostico = `
A diferen√ßa observada em rela√ß√£o √† m√©dia da faixa et√°ria (${faixa}) √© significativa.
Varia√ß√£o de Lat√™ncia: ${varLat.toFixed(1)}%.
Varia√ß√£o de Amplitude: ${varAmp.toFixed(1)}%.

Pode indicar altera√ß√£o no processamento cognitivo relacionado ao ERP analisado.
Sugere-se avalia√ß√£o especializada.
`;

}

diagnostico += `

‚ö† Este sistema possui car√°ter educativo e n√£o substitui avalia√ß√£o cl√≠nica especializada.
`;

document.getElementById('diagnostico').innerText =
  `Resultado para ${nome}:\n${diagnostico}`;



// ===============================
// Atualiza o gr√°fico com os novos valores
// ===============================

erpChart.data.datasets[0].data[index] = latencia;   // Atualiza lat√™ncia
erpChart.data.datasets[1].data[index] = amplitude;  // Atualiza amplitude

erpChart.update(); // Atualiza visualmente o gr√°fico

// Limpa o formul√°rio
this.reset();

});
*/
  
  /*
    const ctx = document.getElementById('erpChart').getContext('2d');

    const faixas = ["15-20", "21-30", "31-40", "41-50", "51-60", "61-70", "71+"];

    const chartData = {
      labels: faixas,
      datasets: [
        {
          label: 'Lat√™ncia (ms)',
          data: [280, 250, 270, 290, 310, 340, 370],
          borderColor: 'red',
          backgroundColor: 'rgba(255, 99, 132, 0.2)',
          yAxisID: 'y1',
          tension: 0.3,
        },
        {
          label: 'Amplitude (ŒºV)',
          data: [12, 14, 13, 11, 10, 8, 6],
          borderColor: 'blue',
          backgroundColor: 'rgba(54, 162, 235, 0.2)',
          yAxisID: 'y2',
          tension: 0.3,
        }
      ]
    };

    const config = {
      type: 'line',
      data: chartData,
      options: {
        responsive: true,
        interaction: {
          mode: 'index',
          intersect: false,
        },
        plugins: {
          title: { display: false },
          tooltip: { mode: 'nearest' }
        },
        scales: {
          y1: {
            type: 'linear',
            position: 'left',
            title: { display: true, text: 'Lat√™ncia (ms)' },
            min: 200,
            max: 400
          },
          y2: {
            type: 'linear',
            position: 'right',
            title: { display: true, text: 'Amplitude (ŒºV)' },
            min: 0,
            max: 20,
            grid: { drawOnChartArea: false }
          }
        }
      }
    };

    const erpChart = new Chart(ctx, config);

    document.getElementById('dataForm').addEventListener('submit', function (e) {
      e.preventDefault();

      const nome = document.getElementById('nome').value;
      const faixa = document.getElementById('faixa').value;
      const latencia = parseFloat(document.getElementById('latencia').value);
      const amplitude = parseFloat(document.getElementById('amplitude').value);

      const index = faixas.indexOf(faixa);
      if (index === -1) {
        alert("Faixa et√°ria inv√°lida!");
        return;
      }

      erpChart.data.datasets.push({
        label: `${nome} - Lat√™ncia`,
        data: Array(faixas.length).fill(null).map((_, i) => i === index ? latencia : null),
        borderColor: 'green',
        backgroundColor: 'green',
        yAxisID: 'y1',
        type: 'line',
        pointStyle: 'circle',
        pointRadius: 7,
        showLine: false
      });

      erpChart.data.datasets.push({
        label: `${nome} - Amplitude`,
        data: Array(faixas.length).fill(null).map((_, i) => i === index ? amplitude : null),
        borderColor: 'purple',
        backgroundColor: 'purple',
        yAxisID: 'y2',
        type: 'line',
        pointStyle: 'triangle',
        pointRadius: 7,
        showLine: false
      });

      // Diagn√≥stico automatizado simples
      let diagnostico = '';
      if (latencia > 350 || amplitude < 6) {
        diagnostico = `Alerta: Os valores de lat√™ncia (${latencia} ms) e/ou amplitude (${amplitude} ŒºV) est√£o fora da faixa t√≠pica esperada. Recomend√°vel avalia√ß√£o mais aprofundada.`;
      } else {
        diagnostico = `Os valores de lat√™ncia (${latencia} ms) e amplitude (${amplitude} ŒºV) est√£o dentro dos par√¢metros m√©dios esperados para a faixa et√°ria de ${faixa}.`;
      }

      document.getElementById('diagnostico').innerText = `Resultado para ${nome}:\n${diagnostico}`;

      erpChart.update();
      this.reset();
    });
    */
  </script>

</body>
</html>






















